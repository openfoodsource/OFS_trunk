!function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,i,a){var o=this,r=(a=a||{}).maxMetaDataSize||262144,l={};!!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,r),function(t){if(t.target.error)return console.log(t.target.error),void i(l);var r,n,s,c,g=t.target.result,d=new DataView(g),f=2,b=d.byteLength-4,m=f;if(65496===d.getUint16(0)){for(;f<b&&((r=d.getUint16(f))>=65504&&r<=65519||65534===r);){if(f+(n=d.getUint16(f+2)+2)>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(s=e.metaDataParsers.jpeg[r])for(c=0;c<s.length;c+=1)s[c].call(o,d,f,n,l,a);m=f+=n}!a.disableImageHead&&m>6&&(g.slice?l.imageHead=g.slice(0,m):l.imageHead=new Uint8Array(g).subarray(0,m))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(l)},"readAsArrayBuffer")||i(l)}});